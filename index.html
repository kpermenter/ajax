<!DOCTYPE html>
<html>

<head>
    <title>News</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js">

    <div id="content">

    </div>



    <!-- /////////////////// -->
    <script>

        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                STATE
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
        // const newsListElement = document.getElementById('content');

        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 1
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

        // document.addEventListener('DOMContentLoaded', function () {


        //     function renderNewsList(newsArray, element) {
        //         newsListHTML = newsArray.map(function (newsItem) {
        //             return `
        //             <div>
        //                 <p>${newsItem.newsTitle}</p>
        //                 <body.onload= "getLyrics('${newsItem.newsTitle}')" data-trackId='${newsItem.newsData2}' data-artistId='${newsItem.newsImage}'>Get Lyrics</button>
        //             </div>
        //             `
        //         })
        //         element.innerHTML = newsListHTML.join('');

        // ({ newsData: newsObj.newsItem.Promoted, 
        //     newsData2: newsObj.newsItem.Data.id, 
        //     newsGuid: newsObj.newsItem.Data.guid, 
        //     newsPublished: newsObj.newsItem.Data.published_on, 
        //     newsImage: newsObj.newsItem.Data.imageurl, 
        //     newsTitle: newsObj.newsItem.Data.title }))

        //GET ELEMENT DOM
        // document.getElementById('content').addEventListener('onload', function (event) {
        //         console.log('page is loaded');

        //         let feedString = document.getElementById('content').value;
        //         console.log(feedString);

        // //GET NEWS FEED LIST
        // axios.get('https://min-api.cryptocompare.com/data/v2/news/?lang=EN' + feedString + '&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0').then(function (response) {
        //             // console.log(response.data.message.body.news_list);
        //             const newsList = response.data.message.body.news_list
        //             console.log(newsList)

        //             const newsItemsWithIds = newsList.map(newsObj => 
        //             ({ newsData: newsObj.newsItem.Promoted, 
        //                 newsData2: newsObj.newsItem.Data.id, 
        //                 newsGuid: newsObj.newsItem.Data.guid, 
        //                 newsPublished: newsObj.newsItem.Data.published_on, 
        //                 newsImage: newsObj.newsItem.Data.imageurl, 
        //                 newsTitle: newsObj.newsItem.Data.title }))
        //             console.log(newsItemsWithIds)
        //             renderNewsList(newsItemsWithIds, newsListElement);
        //         })

        //     });
        // });



        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 2
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

        // function fetchNews() {
        //     return new Promise((resolve, reject) => {
        //     $.ajax({
        //         url: "https://min-api.cryptocompare.com/data/v2/news/?lang=EN" + content + "&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0"
        //         type: 'GET',
        //         data: {
        //             key: 'value',
        //         },
        //         success: function(data) {
        //             resolve(data)
        //         },
        //         error: function(error) {
        //             reject(error)
        //         },
        //     });
        //     });
        // }


        // function renderNews(response) {
        //     var news = response.message.map(element);
        //     var newsHTML = news.join('');
        //     // $("#content").html(newsHTML);

        //     document.getElementById('content').innerHTML = 
        // }


        // fetchNews()
        // .then(data => {
        //     console.log(data)
        //     renderNews()
        // })
        // .catch(error => {
        //     console.log(error)
        // })



        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 3
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
        // request("GET", "https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0")
        // .then((data) => {
        //     var data = data.target.response
        //     var dataObject = JSON.parse(data)
        //     console.log(dataObject)
        // });


        // $.get("https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0",
        // {
        //     Data: [{
        //         id: "id",
        //         title: "title",
        //         url: "url"
        //     }]
        // },
        // function(Data, status) {
        // alert("Data: " + data + "\nStatus: " + status);
        // console.log(Data);
        //   });


        // var parsed_data = JSON.parse(data);
        // console.log(parsed_data.success);

        $.ajax({
            url: "https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0",
            type: 'GET',
            function(data) {
                var data = [{
                    id: id,
                    title: title,
                    url: url
                }];

                var string = JSON.stringify(data.value);
                var parseData = JSON.parse(string);
            {

            function render() {
               var contentHTML =  $("#content").html(parseData.value);

            }
                return `
                <div id="content">'${contentHTML[0]}'</div>
                `
            }
            render(data);
        }

        });



    </script>


    <!-- /////////////////////////////////////////// -->

</body>

</html>
