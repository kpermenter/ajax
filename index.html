<!DOCTYPE html>
<html>

<head>
    <title>News</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="index.css" />
    <link href="https://fonts.googleapis.com/css?family=Special+Elite&display=swap" rel="stylesheet">
</head>

<header>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <!-- particles.js container -->
        <div id="particles-js" class="splash-logo">

        </div>

        <div class="navbar-header">
            <a class="navbar-brand" style="font-size: 35px" href="index.html">
                <span class="flex-row justify-content-around"><img src="images/logo.png" width="115" height="100"
                        alt="CryptoCoin"></span>
                Cryptocoin
            </a>
        </div>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav pr-4">
                <li class="nav-item active">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="prices.html">Prices</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="news.html">News</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="blockchain.html">Blockchain 101</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                </li>
            </ul>
        </div>

    </nav>
</header>
<!-- scripts -->
<script src="particles.js"></script>
<script src="app.js"></script>

<div class="container">
    <div class="row pt-2">
        <div class="col-12 header text-center">
            <h2 class="display-3">News</h2>
            <p class="pt-0 pb-3" style="font-size:26px"></p>
        </div>
    </div>

    <!-- <div class="col-12 align-content-center flex-row">
        <iframe
            src="https://widgets.coingape.com/#/news?qid=usd&qsymbol=usd&bid=bitcoin&bsymbol=btc&h=550&w=350&cat=bitcoin%20news&time=true"
            class="col-4" height="600px" width="290px" style="overflow:hidden; border: 1px solid black"
            scrolling="yes"></iframe>
        <iframe
            src="https://widgets.coingape.com/#/news?qid=usd&amp;qsymbol=usd&amp;bid=litecoin&amp;bsymbol=ltc&amp;h=550&amp;w=350&amp;cat=altcoin%20news&amp;time=true"
            class="col-4" height="600px" width="290px" style="overflow:hidden; border: 1px solid black"
            scrolling="yes"></iframe>
    </div> -->

    <html>

    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link href="index.js">
    </head>

    <div id="content">

    </div>



    <!-- /////////////////// -->
    <script>

        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                STATE
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
        // const newsListElement = document.getElementById('content');

        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 1
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

        // document.addEventListener('DOMContentLoaded', function () {


        //     function renderNewsList(newsArray, element) {
        //         newsListHTML = newsArray.map(function (newsItem) {
        //             return `
        //             <div>
        //                 <p>${newsItem.newsTitle}</p>
        //                 <body.onload= "getLyrics('${newsItem.newsTitle}')" data-trackId='${newsItem.newsData2}' data-artistId='${newsItem.newsImage}'>Get Lyrics</button>
        //             </div>
        //             `
        //         })
        //         element.innerHTML = newsListHTML.join('');

        // ({ newsData: newsObj.newsItem.Promoted, 
        //     newsData2: newsObj.newsItem.Data.id, 
        //     newsGuid: newsObj.newsItem.Data.guid, 
        //     newsPublished: newsObj.newsItem.Data.published_on, 
        //     newsImage: newsObj.newsItem.Data.imageurl, 
        //     newsTitle: newsObj.newsItem.Data.title }))

        //GET ELEMENT DOM
        // document.getElementById('content').addEventListener('onload', function (event) {
        //         console.log('page is loaded');

        //         let feedString = document.getElementById('content').value;
        //         console.log(feedString);

        // //GET NEWS FEED LIST
        // axios.get('https://min-api.cryptocompare.com/data/v2/news/?lang=EN' + feedString + '&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0').then(function (response) {
        //             // console.log(response.data.message.body.news_list);
        //             const newsList = response.data.message.body.news_list
        //             console.log(newsList)

        //             const newsItemsWithIds = newsList.map(newsObj => 
        //             ({ newsData: newsObj.newsItem.Promoted, 
        //                 newsData2: newsObj.newsItem.Data.id, 
        //                 newsGuid: newsObj.newsItem.Data.guid, 
        //                 newsPublished: newsObj.newsItem.Data.published_on, 
        //                 newsImage: newsObj.newsItem.Data.imageurl, 
        //                 newsTitle: newsObj.newsItem.Data.title }))
        //             console.log(newsItemsWithIds)
        //             renderNewsList(newsItemsWithIds, newsListElement);
        //         })

        //     });
        // });



        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 2
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

        // function fetchNews() {
        //     return new Promise((resolve, reject) => {
        //     $.ajax({
        //         url: "https://min-api.cryptocompare.com/data/v2/news/?lang=EN" + content + "&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0"
        //         type: 'GET',
        //         data: {
        //             key: 'value',
        //         },
        //         success: function(data) {
        //             resolve(data)
        //         },
        //         error: function(error) {
        //             reject(error)
        //         },
        //     });
        //     });
        // }


        // function renderNews(response) {
        //     var news = response.message.map(element);
        //     var newsHTML = news.join('');
        //     // $("#content").html(newsHTML);

        //     document.getElementById('content').innerHTML = 
        // }


        // fetchNews()
        // .then(data => {
        //     console.log(data)
        //     renderNews()
        // })
        // .catch(error => {
        //     console.log(error)
        // })



        /*~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        ATTEMPT 3
        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
        // request("GET", "https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0")
        // .then((data) => {
        //     var data = data.target.response
        //     var dataObject = JSON.parse(data)
        //     console.log(dataObject)
        // });


        // $.get("https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0",
        // {
        //     Data: [{
        //         id: "id",
        //         title: "title",
        //         url: "url"
        //     }]
        // },
        // function(Data, status) {
        // alert("Data: " + data + "\nStatus: " + status);
        // console.log(Data);
        //   });


        // var parsed_data = JSON.parse(data);
        // console.log(parsed_data.success);

        $.ajax({
            url: "https://min-api.cryptocompare.com/data/v2/news/?lang=EN&api_key=985402fdb81c74083af15ad1ab0b905937ad295d50144f8055daa7565b2338f0",
            type: 'GET',
            function(data) {
                var data = [{
                    id: id,
                    title: title,
                    url: url
                }];

                var data = [{
                    id: id,
                    title: title,
                    url: url
                }];
                var string = JSON.stringify(data.value);
                var parseData = JSON.parse(string);
                
                document.getElementById("content").innerHTML = parseData.value;
                var contentHTML = parseData[0];

                return `
                <div id="content">'${contentHTML[0]}'</div>
                `
            }
        });


    </script>

    <!-- /////////////////////////////////////////// -->

    </body>

    </html>

    <div class="pt-5">
        <nav class="navbar fixed-bottom navbar-expand-lg navbar-dark p-0">
            <div class="">
                <span class="flex-row justify-content-start navbar-brand"><img src="images/social-icons.png"
                        height="40px">
                </span>
            </div>
        </nav>
    </div>
    <br>
    <br>
</script>

</body>

</html>
